# é¡¹ç›®è¯´æ˜

## ç‰ˆæœ¬ä½¿ç”¨

åˆçº¦ä½¿ç”¨ solidity 0.8.13

### ä½¿ç”¨å¥—ä»¶

åŸºäº openzeppelin ownerableã€erc 721 å¼€å‘ï¼Œä½¿ç”¨ truffle/ganache æ­å»ºé¡¹ç›®ï¼Œè¿›è¡Œæµ‹è¯•ã€éƒ¨ç½²ï¼Œå®ç°äº†ä¸€ä¸ªåƒµå°¸å¯¹æˆ˜æ¸¸æˆã€‚

#### ä¸»è¦ä½¿ç”¨è¯­è¨€ç‰¹æ€§ä¸º

- ç»“æ„ä½“, å¤šç»§æ‰¿, ä¿®é¥°ç¬¦, ä½¿ç”¨åº“, äº‹ä»¶, æ¥å£, hashing-with-Keccak256 ç­‰ã€‚

#### ä¸»è¦æ¸¸æˆå†…å®¹ä¸º

- æ¯ä¸ªç©å®¶ä»…å¯ä»¥åˆ›å»ºä¸€ä¸ª ğŸ§Ÿâ€â™€ï¸ã€‚

- æ¯ä¸ª ğŸ§Ÿâ€â™‚ï¸ æ‹¥æœ‰è‡ªå·±çš„å±æ€§ï¼Œä¸»è¦åŒ…æ‹¬ï¼š

```å±æ€§
    struct Zombie {
        string name;  // å§“å
        uint256 dna;  // dna å­—ç¬¦ç‰‡æ®µ
        uint32 level;  //  ç­‰çº§
        uint32 readyTime;  // æ”»å‡»å†·å´æ—¶é—´
        uint16 winCount;  // æ”»å‡»è·èƒœæ¬¡æ•°
        uint16 lossCount;  // æ”»å‡»å¤±è´¥æ¬¡æ•°
        uint16 price;  // è‡ªèº«ä»·æ ¼
    }
```

- æ¯ä¸ªç©å®¶å¯ä»¥é€å‡ºè‡ªå·±çš„ ğŸ§Ÿâ€â™€ï¸ çµ¦å…¶ä»–äººã€‚

- æ¯ä¸ªç©å®¶å¯ä»¥è®©è‡ªå·±çš„ ğŸ§Ÿâ€â™€ï¸ æ”»å‡»å…¶ä»–äººçš„ ğŸ§Ÿâ€â™€ï¸ï¼Œæ ¹æ®æ¦‚ç‡è·èƒœè¿˜æ˜¯å¤±è´¥ã€‚è·èƒœåç”Ÿæˆæ–°çš„ dnaï¼Œä»è€Œä¸ºè‡ªå·±ç”Ÿæˆæ–°çš„ ğŸ§Ÿâ€â™€ï¸ã€‚

- æ¯ä¸ªåƒµå°¸å¯ä»¥å‡çº§ï¼Œ2 çº§å¯ä»¥æ”¹åï¼Œ20 çº§å¯ä»¥æ›´æ”¹ dnaã€‚

- æ¯ä¸ªåƒµå°¸çš„ dnaï¼Œæ ¹æ®è®¾è®¡ç”± 16 ä½æ•°å­—ç»„æˆï¼Œä¸åŒä½ç½®æ•°å­—å†³å®šæ‰‹ã€è…¿ã€å¤´ã€çœ¼ç›ç­‰å¤–è§‚ã€‚

- æ¯ä¸ªåƒµå°¸è¿˜å¯ä»¥åƒæ‰ kittyã€‚ä¸ºè‡ªå·±ç”Ÿæˆæ–°çš„æœ«å°¾ä½ä¸º 99 çš„ ğŸ§Ÿâ€â™€ï¸ã€‚

#### é¡¹ç›®ç»“æ„ä¸º

```text
.
â”œâ”€â”€ build      // ç¼–è¯‘ç›®å½•
â”‚   â””â”€â”€ contracts  // åˆçº¦ abi json
â”œâ”€â”€ client     // dapp å‰ç«¯ç›®å½•ï¼Œ ä½¿ç”¨ contracts abi å’Œ é’±åŒ… provider
â”‚   â”œâ”€â”€ bs-config.json   // lite server é…ç½®
â”‚   â”œâ”€â”€ index.html  //
â”‚   â”œâ”€â”€ package-lock.json
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ src
â”œâ”€â”€ contracts    //  åˆçº¦ç›®å½•
â”‚   â”œâ”€â”€ CryptoZombies.sol
â”‚   â”œâ”€â”€ Migrations.sol
â”‚   â”œâ”€â”€ ZombieAttack.sol
â”‚   â”œâ”€â”€ ZombieFactory.sol
â”‚   â”œâ”€â”€ ZombieFeeding.sol
â”‚   â””â”€â”€ ZombieHelper.sol
â”œâ”€â”€ migrations   // è¿ç§»ç›®å½•
â”‚   â”œâ”€â”€ 1_initial_migration.js
â”‚   â””â”€â”€ 2_deploy_contracts.js
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â”œâ”€â”€ readme.md
â”œâ”€â”€ test     // æµ‹è¯•ç”¨ä¾‹ç›®å½•
â”‚   â”œâ”€â”€ CryptoZombies.js  // å…·ä½“ç”¨ä¾‹
â”‚   â””â”€â”€ helpers
â””â”€â”€ truffle-config.js

```

#### ä½¿ç”¨è¯´æ˜ï¼š

1. å¯åŠ¨ ganache æµ‹è¯•ç½‘ç»œ
1. truffle migrate --network ganache éƒ¨ç½²åˆçº¦
1. cd client ç›®å½•ï¼Œnpm install å®‰è£…ä¾èµ–ï¼Œnode start å¯åŠ¨ web å‰ç«¯ï¼Œå³å¯ä»¥ä¸é“¾ç«¯äº¤äº’ã€‚
1. web å‰ç«¯ç›®å‰åŠŸèƒ½ï¼š

```text
1. æ ¹æ®é’±åŒ…ç”ŸæˆğŸ§Ÿâ€â™€ï¸ã€‚
2. é€å‡ºè‡ªå·±çš„ğŸ§Ÿâ€â™€ï¸çµ¦å…¶ä»–é’±åŒ…ã€‚
3. æŸ¥çœ‹è‡ªå·±é’±åŒ…åœ°å€æ‰€æ‹¥æœ‰çš„ğŸ§Ÿâ€â™€ï¸ä¿¡æ¯ã€‚
```

#### æ³¨æ„

ç›®å‰éšæœºæ•°ç”Ÿæˆä½¿ç”¨ keccak256(abi.encodePacked(block.timestamp, msg.sender, randNonce))ï¼Œæœªä½¿ç”¨ chainlinkã€‚

#### è¯¦ç»†å‚è€ƒ

- <https://solidity-by-example.org/>
- <https://cryptozombies.io/>
